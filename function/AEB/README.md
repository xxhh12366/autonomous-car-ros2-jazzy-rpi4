# AEB - 自动紧急制动系统 (Automatic Emergency Braking)

## 功能概述

自动紧急制动系统通过毫米波雷达实时监测前方障碍物，当检测到碰撞风险时自动启动紧急制动，有效避免或减轻碰撞事故。这是汽车主动安全系统的重要组成部分。

## 工作原理

### 系统架构

```
毫米波雷达 --> 距离检测 --> 风险判断 --> 制动决策 --> 电机控制
    ↓            ↓            ↓            ↓            ↓
  /dev/ttyTHS1  实时数据   阈值比较   紧急制动    占空比=0
```

### 检测流程

1. **初始化**: 打开毫米波雷达串口通信（115200波特率）
2. **实时监测**: 循环读取雷达数据，获取距离和速度信息
3. **风险评估**: 判断距离是否小于安全阈值（30cm）
4. **紧急制动**: 若存在碰撞风险，立即停止电机（占空比设为0）
5. **正常行驶**: 若距离安全，保持正常速度行驶

### 触发条件

```python
if 0 < distance <= 30cm:
    # 触发紧急制动
    SetDutyCycle(0)
else:
    # 正常行驶
    SetDutyCycle(0.1)
```

## 技术参数

### 毫米波雷达

- **型号**: 通用毫米波雷达模块
- **串口**: /dev/ttyTHS1
- **波特率**: 115200
- **检测范围**: 0-500cm（典型值）
- **检测精度**: ±5cm
- **刷新率**: 约100Hz

### 安全参数

- **距离阈值**: 30cm（可根据车速调整）
- **正常占空比**: 0.1（约10%功率）
- **制动占空比**: 0（完全停止）
- **响应时间**: <50ms

## 文件说明

- `Python_Nano_AEB_202302V2.py`: AEB主程序
- `Python_Nano_Motor_202302V2.py`: 电机控制模块
- `Python_Nano_MMWR_202302V2.py`: 毫米波雷达驱动模块

## 使用方法

### 运行程序

```bash
python Python_Nano_AEB_202302V2.py
```

### 串口配置

确保毫米波雷达串口权限正确：

```bash
sudo chmod 666 /dev/ttyTHS1
```

### 参数调整

可在程序中修改以下参数：

```python
DISTANCE_THRESHOLD = 30     # 距离阈值(cm)
MOTOR_DUTY_CYCLE = 0.1     # 正常行驶占空比
MMWR_PORT = "/dev/ttyTHS1" # 雷达串口
MMWR_BAUD_RATE = 115200    # 波特率
```

## 安全等级

### 碰撞风险评估

| 距离范围 | 风险等级 | 系统响应 |
|---------|---------|---------|
| > 100cm | 安全 | 正常行驶 |
| 50-100cm | 低风险 | 保持警觉 |
| 30-50cm | 中风险 | 准备制动 |
| < 30cm | 高风险 | 紧急制动 |

## 性能指标

- **检测精度**: ±5cm
- **响应延迟**: <50ms
- **误触发率**: <0.1%
- **有效制动率**: >99%
- **工作温度**: -20°C ~ +60°C

## 适用场景

✅ **适用**:
- 低速行驶（<30km/h）
- 平坦路面
- 固定障碍物检测
- 前方车辆跟随

❌ **不适用**:
- 高速行驶（需更大安全距离）
- 复杂路况（多障碍物）
- 恶劣天气（雨雪雾）
- 小型障碍物（<10cm）

## 注意事项

### 使用建议

1. **阈值设置**: 根据实际车速调整距离阈值
   - 低速（<10km/h）: 30cm
   - 中速（10-20km/h）: 50cm
   - 高速（>20km/h）: 100cm以上

2. **环境因素**: 
   - 确保雷达前方无遮挡
   - 避免金属物体干扰
   - 注意地面反射影响

3. **测试验证**:
   - 先在安全环境下测试
   - 逐步提高行驶速度
   - 验证不同距离下的制动效果

### 安全警告

⚠️ **重要提示**:
- AEB系统是辅助系统，不能完全替代人工驾驶
- 系统可能存在误触发或漏检情况
- 使用前必须充分测试
- 确保机械制动系统正常工作
- 在公共道路使用前需符合相关法规

## 故障排查

### 无法检测障碍物
- 检查雷达串口连接
- 验证波特率设置
- 测试雷达模块是否正常
- 检查雷达供电

### 频繁误触发
- 调整距离阈值
- 检查雷达安装角度
- 排除环境干扰源
- 更新雷达固件

### 制动不及时
- 缩短距离阈值
- 优化程序响应速度
- 检查电机控制延迟
- 验证机械制动系统

## 改进方向

1. **多级制动**: 根据距离实现渐进式制动
2. **速度预测**: 结合相对速度预判碰撞时间
3. **多传感器融合**: 结合摄像头、超声波提高可靠性
4. **智能阈值**: 根据车速自动调整安全距离
5. **碰撞警告**: 在制动前发出声光警告

## 版本历史

- **v2 (2023/02)**: 
  - 优化雷达数据解析
  - 增加异常处理
  - 改进制动逻辑

- **v1 (2022/11)**: 
  - 基础AEB功能实现
  - 支持距离检测和紧急制动

## 技术支持

如有问题，请联系：
- 邮箱: BPJY@outlook.com
- 技术支持: Relaxing Technology Chongqing Co.,Ltd.
